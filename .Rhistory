install.packages(installr)
setwd("~/GitHub/northside_policing_2019")
library("tidyverse")
library("readxl")
library("ggplot2")
library("RColorBrewer")
setwd("~/Dropbox/UNC/Classes/HBEH720/Northside")
arrest_append <- read_excel("00_data/arrests_append.xlsx")
head(arrest_append)
arrest_append %>%
ggplot(aes(x=male)) +
geom_bar() +
facet_wrap(~attached)
arrest_append2 <- arrest_append
levels(arrest_append2$attached)[levels(tips2$attached)==0] <- "Overall"
levels(arrest_append2$attached)[levels(tips2$attached)==1]   <- "Incident-led Arrest"
arrest_append2 %>%
ggplot(aes(x=male)) +
geom_bar() +
facet_wrap(~attached)
arrest_append2 <- arrest_append
levels(arrest_append2$attached)[levels(arrest_append2$attached)==0] <- "Overall"
levels(arrest_append2$attached)[levels(arrest_append2$attached)==1]   <- "Incident-led Arrest"
arrest_append2 %>%
ggplot(aes(x=male)) +
geom_bar() +
facet_wrap(~attached)
arrest_append2 <- arrest_append
arrest_append2$attached <- as.factor(arrest_append2$attached)
levels(arrest_append2$attached)[levels(arrest_append2$attached)==0] <- "Overall"
levels(arrest_append2$attached)[levels(arrest_append2$attached)==1]   <- "Incident-led Arrest"
arrest_append2 %>%
ggplot(aes(x=male)) +
geom_bar() +
facet_wrap(~attached)
?geom_bar
arrest_append2 %>%
group_by(attached) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count))
View(arrest_append)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count))
arrest_append2 %>%
ggplot(aes(x = factor(sex), y = perc*100)) +
geom_bar() +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(sex), y = perc*100)) +
geom_bar() +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(sex), y = perc*100)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(sex), y = perc*100)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(sex), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(arrest_cat), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, arrest_cat, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(arrest_cat), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~attached)
arrest_append2 %>%
group_by(attached, arrest_cat, sex, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat)
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat)
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=race)) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_distiller(palette = "Greens")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_distiller(palette = "Greens")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_color_distiller(palette = "Greens")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_color_brewer(palette = "Greens")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Greens")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral")
?facet_wrap
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral") +
labs(x="hi")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="hi")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Arrests Preceeded by Incident")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest")
arrest_append2$race <- as.factor(arrest_append2$race)
levels(arrest_append2$race)[levels(arrest_append2$race)=="A"] <- "Asian"
levels(arrest_append2$race)[levels(arrest_append2$race)=="B"]   <- "Black"
levels(arrest_append2$race)[levels(arrest_append2$race)=="H"] <- "Hispanic"
levels(arrest_append2$race)[levels(arrest_append2$race)=="I"]   <- "Native American"
levels(arrest_append2$race)[levels(arrest_append2$race)=="W"] <- "White"
levels(arrest_append2$race)[levels(arrest_append2$race)=="U"]   <- "Unknown"
group_by(groupchange,Symscore3) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom")
arrest_append <- read_excel("00_data/arrests_append.xlsx")
arrest_append2 <- arrest_append
arrest_append2$attached <- as.factor(arrest_append2$attached)
levels(arrest_append2$attached)[levels(arrest_append2$attached)==0] <- "Overall"
levels(arrest_append2$attached)[levels(arrest_append2$attached)==1]   <- "Incident-led\nArrest"
arrest_append2$race <- as.factor(arrest_append2$race)
levels(arrest_append2$race)[levels(arrest_append2$race)=="A"] <- "Asian"
levels(arrest_append2$race)[levels(arrest_append2$race)=="B"]   <- "Black"
levels(arrest_append2$race)[levels(arrest_append2$race)=="H"] <- "Hispanic"
levels(arrest_append2$race)[levels(arrest_append2$race)=="I"]   <- "Native American"
levels(arrest_append2$race)[levels(arrest_append2$race)=="W"] <- "White"
levels(arrest_append2$race)[levels(arrest_append2$race)=="U"]   <- "Unknown"
group_by(groupchange,Symscore3) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom")
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom") +
opts(axis.text.x=theme_text(angle=45)
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom") +
opts(axis.text.x=theme_text(angle=45)
h
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom") +
opts(axis.text.x=theme_text(angle=45)
h
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom") +
opts(axis.text.x=theme_text(angle=45))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = 45, hjust = 1))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = 90, hjust = 1))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = -90, hjust = 1))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race/Ethnicity") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = -90, hjust = 1))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race/Ethnicity") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = -70, hjust = 1))
arrest_append2 %>%
group_by(attached, arrest_cat, race) %>%
summarise(count=n()) %>%
mutate(perc=count/sum(count)) %>%
ggplot(aes(x = factor(attached), y = perc*100, fill=factor(race))) +
geom_bar(stat="identity", width = 0.7) +
facet_wrap(~arrest_cat) +
theme_minimal() +
scale_fill_brewer(palette = "Spectral", name = "Race/Ethnicity") +
labs(x="Overall Arrests vs. Incident-led Arrests",
y="Percent",
title="Differences in Race Distribution by Origin of Arrest") +
theme(legend.position="bottom",
axis.text.x = element_text(angle = -90, hjust = 1))
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
source('~/GitHub/northside_policing_2019/barplot.R')
